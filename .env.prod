# V2 POC Production Environment Configuration
# This file contains production-specific configurations for app-prod container

# ====================================
# AI SERVICE CONFIGURATION
# ====================================

# OpenRouter API Configuration
OPENROUTER_API_KEY=your-production-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
DEFAULT_MODEL=openai/gpt-4

# Alternative AI Provider (Optional)
# AZURE_OPENAI_ENDPOINT=https://your-prod-endpoint.openai.azure.com/
# AZURE_OPENAI_API_KEY=your-azure-prod-api-key
# AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4

# ====================================
# DATABASE CONFIGURATION (SHARED INSTANCES)
# ====================================

# PostgreSQL Configuration - Connected to single shared instance
POSTGRES_USER=pocuser
POSTGRES_PASSWORD=pocpass
POSTGRES_DB=poc_db
# Internal Docker network connection for app-prod container
DATABASE_URL=postgresql://pocuser:pocpass@postgres:5432/poc_db

# MongoDB Configuration - Connected to single shared instance
MONGO_INITDB_ROOT_USERNAME=mongoadmin
MONGO_INITDB_ROOT_PASSWORD=mongopass123
MONGO_INITDB_DATABASE=poc_mongo_db
# Internal Docker network connection for app-prod container
MONGODB_URL=mongodb://mongoadmin:mongopass123@mongodb:27017/poc_mongo_db

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=prodpass

# ====================================
# OBJECT STORAGE CONFIGURATION
# ====================================

# MinIO Configuration (S3-compatible) - Production instance
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=secure-minio-prod-password-2024
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=secure-minio-prod-password-2024
MINIO_SECURE=false
MINIO_BUCKET_NAME=v2-prod-storage

# ====================================
# APPLICATION CONFIGURATION
# ====================================

# Application Environment
APP_ENV=production
LOG_LEVEL=WARNING
DEBUG=false

# JWT Configuration
JWT_SECRET_KEY=super-secure-production-jwt-key-2024-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=8

# CORS Configuration - Restrictive for production
ALLOWED_ORIGINS=https://pocmaster.argentquest.com,https://api-prod.pocmaster.argentquest.com
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key

# Domain Configuration
DOMAIN_NAME=api-prod.pocmaster.argentquest.com
SSL_EMAIL=admin@argentquest.com

# ====================================
# DEVELOPMENT TOOLS CONFIGURATION
# ====================================

# VS Code Server (Disabled in production)
VSCODE_PASSWORD=disabled-in-production
VSCODE_SUDO_PASSWORD=disabled-in-production

# Portainer Configuration
PORTAINER_ADMIN_PASSWORD=secure-production-portainer-password-2024

# ====================================
# WEB UI CREDENTIALS
# ====================================

# pgAdmin Default Login (Production credentials)
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=admin

# Mongo Express Basic Auth (Production credentials)
ME_CONFIG_BASICAUTH_USERNAME=admin
ME_CONFIG_BASICAUTH_PASSWORD=admin

# ====================================
# PERFORMANCE & SCALING (Production)
# ====================================

# FastAPI Workers (Production - Multiple workers)
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=100

# Database Connection Pools (Higher for production)
POSTGRES_MAX_CONNECTIONS=200
REDIS_MAX_CONNECTIONS=100
MONGODB_MAX_POOL_SIZE=50

# Cache Configuration
CACHE_TTL_SECONDS=3600  # 1 hour for production
CACHE_MAX_SIZE_MB=256

# ====================================
# MONITORING & LOGGING
# ====================================

# Logging Configuration
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/prod.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=10

# Metrics Collection
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# ====================================
# SECURITY CONFIGURATION
# ====================================

# Rate Limiting (Strict for production)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=20

# API Security
API_KEY_HEADER=X-API-Key
REQUIRE_API_KEY=true

# Session Configuration
SESSION_TIMEOUT_MINUTES=60
SESSION_CLEANUP_INTERVAL=300

# ====================================
# PRODUCTION OVERRIDES
# ====================================

# Production-specific settings
PROD_SSL_VERIFY=true
PROD_SECURE_COOKIES=true
PROD_RATE_LIMITING=strict
PROD_LOGGING_LEVEL=WARNING

# Production Security
PROD_HIDE_DOCS=true
PROD_DISABLE_ADMIN_ENDPOINTS=true
PROD_ENABLE_AUDIT_LOG=true

# ====================================
# BACKUP CONFIGURATION
# ====================================

# Database Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=v2-prod-backups

# ====================================
# EXTERNAL SERVICES (Production)
# ====================================

# Email Configuration (Production SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=noreply@argentquest.com
SMTP_PASSWORD=your-production-app-password
SMTP_USE_TLS=true

# Webhook Configuration
WEBHOOK_SECRET=secure-production-webhook-secret-2024
WEBHOOK_ENABLED=true

# ====================================
# AI PRODUCTION SETTINGS
# ====================================

# AI Model Configuration
AI_TEMPERATURE=0.5
AI_MAX_TOKENS=1500
AI_TOP_P=0.8
AI_FREQUENCY_PENALTY=0.1
AI_PRESENCE_PENALTY=0.1

# RAG Configuration
RAG_CHUNK_SIZE=800
RAG_CHUNK_OVERLAP=150
RAG_TOP_K_RESULTS=3
RAG_SIMILARITY_THRESHOLD=0.8

# Vector Database Settings
VECTOR_DIMENSION=1024
VECTOR_INDEX_TYPE=ivfflat
VECTOR_INDEX_LISTS=100

# ====================================
# PERFORMANCE MONITORING
# ====================================

# APM Configuration
APM_ENABLED=true
APM_SERVICE_NAME=v2-poc-prod
APM_ENVIRONMENT=production

# Error Tracking
SENTRY_DSN=your-sentry-dsn-here
SENTRY_TRACES_SAMPLE_RATE=0.1

# ====================================
# COMPLIANCE & GOVERNANCE
# ====================================

# Data Retention
DATA_RETENTION_DAYS=365
LOG_RETENTION_DAYS=90
METRICS_RETENTION_DAYS=180

# Privacy & Security
ENABLE_DATA_ENCRYPTION=true
ENABLE_AUDIT_TRAIL=true
ENABLE_GDPR_COMPLIANCE=true